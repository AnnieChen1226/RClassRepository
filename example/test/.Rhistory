simpletxtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDateSimple.csv",sep = ",", as.is = TRUE)
simpletxtDate$t <- factor(simpletxtDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletxtDate$date <- as.Date(simpletxtDate$date,format="%Y-%m-%d")
Graph_txt_S<-ggplot(data=simpletxtDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_txt_S<-Graph_txt_S+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030"))+ scale_x_date(date_minor_breaks="3 day ")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_txt_S)
simpletxtDate$t <- factor(simpletxtDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletxtDate$date <- as.Date(simpletxtDate$date,format="%Y-%m-%d")
Graph_txt_S<-ggplot(data=simpletxtDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_txt_S<-Graph_txt_S+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030"))+ scale_x_date(date_minor_breaks="3 day ")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_txt_S)
library(ggplot2)
library(varhandle)
#讀檔
titleDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//titleDate.csv",sep = ",", as.is = TRUE)
txtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDate.csv",sep = ",", as.is = TRUE)
titleDate$t <- factor(titleDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","遊行","中共","元朗","立法會"), ordered = TRUE )
titleDate$date <- as.Date(titleDate$date,format="%Y-%m-%d")
Graph_title<-ggplot(data=titleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title<-Graph_title+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030","#ffa042","#5b5b5b","#eac100"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title)
#讀檔
titleDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//titleDate.csv",sep = ",", as.is = TRUE)
txtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDate.csv",sep = ",", as.is = TRUE)
titleDate$t <- factor(titleDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","遊行","中共","元朗","立法會"), ordered = TRUE )
titleDate$date <- as.Date(titleDate$date,format="%Y-%m-%d")
Graph_title<-ggplot(data=titleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title<-Graph_title+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030","#ffa042","#5b5b5b","#eac100"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title)
txtDate$t <- factor(txtDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","遊行","中共","元朗","立法會"), ordered = TRUE )
#讀檔
library(readxl)
titleData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//TDM_titles.csv")
txtData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//TDM_texts.csv")
library(data.table)
titleData1<-setDT(titleData, key='d')[.("香港")]
titleData2<-setDT(titleData, key='d')[.("反送中")]
titleData3<-setDT(titleData, key='d')[.("逃犯條例")]
titleData4<-setDT(titleData, key='d')[.("共產黨")]
titleData5<-setDT(titleData, key='d')[.("遊行")]
titleData6<-setDT(titleData, key='d')[.("中共")]
titleData7<-setDT(titleData, key='d')[.("元朗")]
titleData8<-setDT(titleData, key='d')[.("立法會")]
titleDataFinal<-rbind(titleData1,titleData2,titleData3,titleData4,titleData5,titleData6,titleData7,titleData8)
write.csv(titleDataFinal, file = "titleDataFinal.csv")
txtData1<-setDT(txtData, key='d')[.("香港")]
txtData2<-setDT(txtData, key='d')[.("反送中")]
txtData3<-setDT(txtData, key='d')[.("逃犯條例")]
txtData4<-setDT(txtData, key='d')[.("共產黨")]
txtData5<-setDT(txtData, key='d')[.("遊行")]
txtData6<-setDT(txtData, key='d')[.("中共")]
txtData7<-setDT(txtData, key='d')[.("元朗")]
txtData8<-setDT(txtData, key='d')[.("立法會")]
txtDataFinal<-rbind(txtData1,txtData2,txtData3,txtData4,txtData5,txtData6,txtData7,txtData8)
write.csv(txtDataFinal, file = "txtDataFinal.csv")
library(NLP)
library(ggplot2)
library(varhandle)
#讀檔
#讀檔
library(readxl)
titleData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//TDM_titles.csv")
txtData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//TDM_texts.csv")
library(data.table)
titleData1<-setDT(titleData, key='d')[.("香港")]
titleData2<-setDT(titleData, key='d')[.("反送中")]
titleData3<-setDT(titleData, key='d')[.("逃犯條例")]
titleData4<-setDT(titleData, key='d')[.("共產黨")]
titleData5<-setDT(titleData, key='d')[.("遊行")]
titleData6<-setDT(titleData, key='d')[.("中共")]
titleData7<-setDT(titleData, key='d')[.("元朗")]
titleData8<-setDT(titleData, key='d')[.("立法會")]
titleDataFinal<-rbind(titleData1,titleData2,titleData3,titleData4,titleData5,titleData6,titleData7,titleData8)
write.csv(titleDataFinal, file = "titleDataFinal.csv")
txtData1<-setDT(txtData, key='d')[.("香港")]
txtData2<-setDT(txtData, key='d')[.("反送中")]
txtData3<-setDT(txtData, key='d')[.("逃犯條例")]
txtData4<-setDT(txtData, key='d')[.("共產黨")]
txtData5<-setDT(txtData, key='d')[.("遊行")]
txtData6<-setDT(txtData, key='d')[.("中共")]
txtData7<-setDT(txtData, key='d')[.("元朗")]
txtData8<-setDT(txtData, key='d')[.("立法會")]
txtDataFinal<-rbind(txtData1,txtData2,txtData3,txtData4,txtData5,txtData6,txtData7,txtData8)
write.csv(txtDataFinal, file = "txtDataFinal.csv")
library(NLP)
library(ggplot2)
library(varhandle)
library(NLP)
library(ggplot2)
library(varhandle)
library(NLP)
library(ggplot2)
library(varhandle)
#讀檔
titleDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//titleDate.csv",sep = ",", as.is = TRUE)
txtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDate.csv",sep = ",", as.is = TRUE)
titleDate$t <- factor(titleDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","遊行","中共","元朗","立法會"), ordered = TRUE )
titleDate$date <- as.Date(titleDate$date,format="%Y-%m-%d")
Graph_title<-ggplot(data=titleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title<-Graph_title+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030","#ffa042","#5b5b5b","#eac100"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title)
txtDate$t <- factor(txtDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","遊行","中共","元朗","立法會"), ordered = TRUE )
txtDate$date <- as.Date(txtDate$date,format="%Y-%m-%d")
Graph_txt<-ggplot(data=txtDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_txt<-Graph_txt+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030","#ffa042","#5b5b5b","#eac100"))+ scale_x_date(date_minor_breaks="3 day ")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_txt)
#讀檔
simpletitleDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//titleDateSimple.csv",sep = ",", as.is = TRUE)
simpletxtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDateSimple.csv",sep = ",", as.is = TRUE)
simpletitleDate$t <- factor(simpletitleDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletitleDate$date <- as.Date(simpletitleDate$date,format="%Y-%m-%d")
Graph_title_S<-ggplot(data=simpletitleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title_S<-Graph_title_S+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title_S)
simpletxtDate$t <- factor(simpletxtDate$t, levels = c("香港","","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletitleDate$t <- factor(simpletitleDate$t, levels = c("香港","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletitleDate$date <- as.Date(simpletitleDate$date,format="%Y-%m-%d")
Graph_title_S<-ggplot(data=simpletitleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title_S<-Graph_title_S+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title_S)
#讀檔
simpletitleDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//titleDateSimple.csv",sep = ",", as.is = TRUE)
simpletxtDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//PttData//output//txtDateSimple.csv",sep = ",", as.is = TRUE)
simpletitleDate$t <- factor(simpletitleDate$t, levels = c("香港","反送中","逃犯條例","共產黨","元朗"), ordered = TRUE )
simpletitleDate$date <- as.Date(simpletitleDate$date,format="%Y-%m-%d")
Graph_title_S<-ggplot(data=simpletitleDate,aes(x=date,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus_title_S<-Graph_title_S+scale_color_manual(values=c("#28004d","#ae0000", "#006030","#9f5000","#613030"))+ scale_x_date(date_minor_breaks = "3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus_title_S)
View(Graph_txt)
View(Graph_txt)
View(Graph_plus_txt_S)
View(Graph_plus_txt_S)
View(simpletxtDate)
library(readxl)
library(ggplot2)
DcardDate<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
DcardDate$createdAt <- as.Date(DcardDate$createdAt,format="%Y-%m-%d")
DcardData$createdAt <- as.Date(DcardData$createdAt,format="%Y-%m-%d")
DcardData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
library(readxl)
DcardData <- read_excel("GitHub/GitHubForRClass/Extradition-Bill/DcardData/DcardData.csv")
View(DcardData)
#DcardData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
DcardData<-read_excel("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.xlsx")
DcardData$createdAt <- as.Date(DcardData$createdAt,format="%Y-%m-%d")
t=c("Dcard")
Graph<-ggplot(data=DcardData,aes(x=createdAt,y=titleque,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus<-Graph+scale_color_manual(values=c("#28004d"))+ scale_x_date(date_minor_breaks="3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus)
Graph<-ggplot(data=DcardData,aes(x=createdAt,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus<-Graph+scale_color_manual(values=c("#28004d"))+ scale_x_date(date_minor_breaks="3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus)
view(DcardData)
View(DcardData)
library(readxl)
library(ggplot2)
#DcardData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
DcardData<-read_excel("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.xlsx")
DcardData$createdAt <- as.Date(DcardData$createdAt,format="%Y-%m-%d")
t=c("Dcard")
Graph<-ggplot(data=DcardData,aes(x=createdAt,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus<-Graph+scale_color_manual(values=c("#28004d"))+ scale_x_date(date_minor_breaks="3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus)
library(httr)
library(jsonlite)
library(NLP)
library(httr)
library(jsonlite)
library(tm)
library(jiebaRD)
library(jiebaR)
library(dplyr)
library(ggplot2)
library(wordcloud)
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcontent<-function(dcardurl,id){
myurl<- paste0(dcardurl,id,collapse="")
resdata<- jsonlite::fromJSON(httr::content(GET(myurl),"text",encoding = "UTF-8"))
toString(resdata$content)
}
dcomment<-function(dcardurl,id){
myurl<- paste0(dcardurl,id,'/comments?limit=50',collapse="")
json<-httr::content(GET(myurl), "text",encoding = "UTF-8")
resdata<- jsonlite::fromJSON(json)
toString(resdata$content)
}
dseg<- function(str,term) {
str = gsub("[A-Za-z0-9]", "", str)
seg = cutter[str]
seg = seg[names(seg)==term]
id = which(nchar(seg) > 1)
result = seg[id]
}
dcardurl <- 'https://www.dcard.tw/_api/forums/trending/'
myurl <- paste0(dcardurl,'posts?popular=false&limit=500&before=23170601')
print(myurl)
resdata<- fromJSON(httr::content(GET(myurl), 'text'))
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/posts/'))
comment<-unlist(lapply(resdata$id,dcomment,dcardurl='https://www.dcard.tw/_api/posts/'))
Dcard<-data.frame(resdata$id,resdata$title,resdata$createdAt,
resdata$updatedAt,resdata$department,
resdata$commentCount,resdata$likeCount,
resdata$gender,content,comment)
head(Dcard$content)
head(Dcard$content)
cutter <- worker('tag',write = "NOFILE")
new_user_word(cutter,'中天','n')
new_user_word(cutter,'總統','n')
new_user_word(cutter,'韓粉','n')
new_user_word(cutter,'民主','n')
new_user_word(cutter,'自由','n')
new_user_word(cutter,'選舉','n')
new_user_word(cutter,'大選','n')
new_user_word(cutter,'香港','n')
new_user_word(cutter,'台灣','n')
new_user_word(cutter,'中國','n')
new_user_word(cutter,'韓導','n')
new_user_word(cutter,'蔡英文','n')
new_user_word(cutter,'韓國瑜','n')
new_user_word(cutter,'柯文哲','n')
new_user_word(cutter,'民進黨','n')
new_user_word(cutter,'國民黨','n')
new_user_word(cutter,'反送中','n')
new_user_word(cutter,'一國兩制','n')
txt1<-unlist(lapply(Dcard$content[1:100],dseg,'n'))
st1<-freq(txt1)
st1<-st1[order(st1$freq,decreasing = TRUE),]
wordcloud(words=st1$char,freq=st1$freq,scale = c(3,0.1),
random.order = F,
ordered.colors = F,
rot.per = F,
min.freq = 5,
colors = brewer.pal(8,"Dark2")
)
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/posts/'))
print(content)
comment<-unlist(lapply(resdata$id,dcomment,dcardurl='https://www.dcard.tw/_api/posts/'))
print(comment)
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/forums/trending/'))
print(content)
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/posts/'))
print(content)
library(NLP)
library(httr)
library(jsonlite)
library(tm)
library(jiebaRD)
library(jiebaR)
library(dplyr)
library(ggplot2)
library(wordcloud)
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcontent<-function(dcardurl,id){
myurl<- paste0(dcardurl,id,collapse="")
resdata<- jsonlite::fromJSON(httr::content(GET(myurl),"text",encoding = "UTF-8"))
toString(resdata$content)
}
dcomment<-function(dcardurl,id){
myurl<- paste0(dcardurl,id,'/comments?limit=50',collapse="")
json<-httr::content(GET(myurl), "text",encoding = "UTF-8")
resdata<- jsonlite::fromJSON(json)
toString(resdata$content)
}
dseg<- function(str,term) {
str = gsub("[A-Za-z0-9]", "", str)
seg = cutter[str]
seg = seg[names(seg)==term]
id = which(nchar(seg) > 1)
result = seg[id]
}
dcardurl <- 'https://www.dcard.tw/_api/forums/trending/'
myurl <- paste0(dcardurl,'posts?popular=false&limit=500&before=231729371')
print(myurl)
resdata<- fromJSON(httr::content(GET(myurl), 'text'))
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/posts/'))
print(content)
myurl <- paste0(dcardurl,'posts?popular=false&limit=500&before=231729371')
print(myurl)
resdata<- fromJSON(httr::content(GET(myurl), 'text'))
content<-unlist(lapply(resdata$id,dcontent,dcardurl='https://www.dcard.tw/_api/forums/trending/'))
print(content)
source('~/GitHub/GitHubForRClass/RClassRepository/example/dcardTrending.R')
library(httr)
library(jsonlite)
library(dplyr)
getwd()
setwd("D:/Annie/Documents/GitHub/GitHubForRClass/RClassRepository/example/test")
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcardurl <- 'https://www.dcard.tw/_api/forums/'
board <- 'trending'
mainurl <- paste0(dcardurl,board,'/posts?popular=false')
resdata <- fromJSON(content(GET(mainurl), "text"))
resdataD<-as.data.frame(resdata)%>%
select(title,createdAt)
head(resdata[,1:2])
library(readxl)
library(ggplot2)
#DcardData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
DcardData<-read_excel("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.xlsx")
DcardData$createdAt <- as.Date(DcardData$createdAt,format="%Y-%m-%d")
t=c("Dcard")
Graph<-ggplot(data=DcardData,aes(x=createdAt,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus<-Graph+scale_color_manual(values=c("#28004d"))+ scale_x_date(date_minor_breaks="3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus)
library(NLP)
library(httr)
library(jsonlite)
library(tm)
library(jiebaRD)
library(jiebaR)
library(dplyr)
library(ggplot2)
library(wordcloud)
library(httr)
library(jsonlite)
library(dplyr)
getwd()
setwd("D:/Annie/Documents/GitHub/GitHubForRClass/RClassRepository/example/test")
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcardurl <- 'https://www.dcard.tw/_api/forums/'
board <- 'trending'
mainurl <- paste0(dcardurl,board,'/posts?popular=false')
resdata <- fromJSON(content(GET(mainurl), "text"))
resdataD<-as.data.frame(resdata)%>%
select(title,content,createdAt)
dseg<- function(str,term) {
str = gsub("[A-Za-z0-9]", "", str)
seg = cutter[str]
seg = seg[names(seg)==term]
id = which(nchar(seg) > 1)
result = seg[id]
}
#Dcard<-data.frame(resdata$id,resdata$title,resdata$createdAt,
#resdata$updatedAt,resdata$department,
#resdata$commentCount,resdata$likeCount,
#resdata$gender,content,comment)
head(Dcard$content)
#Dcard<-data.frame(resdata$id,resdata$title,resdata$createdAt,
#resdata$updatedAt,resdata$department,
#resdata$commentCount,resdata$likeCount,
#resdata$gender,content,comment)
head(resdataD$content)
#Dcard<-data.frame(resdata$id,resdata$title,resdata$createdAt,
#resdata$updatedAt,resdata$department,
#resdata$commentCount,resdata$likeCount,
#resdata$gender,content,comment)
head(resdataD$title)
new_user_word(cutter,'大選','n')
new_user_word(cutter,'香港','n')
new_user_word(cutter,'台灣','n')
new_user_word(cutter,'中國','n')
new_user_word(cutter,'韓導','n')
new_user_word(cutter,'蔡英文','n')
new_user_word(cutter,'韓國瑜','n')
new_user_word(cutter,'柯文哲','n')
new_user_word(cutter,'民進黨','n')
new_user_word(cutter,'國民黨','n')
new_user_word(cutter,'反送中','n')
new_user_word(cutter,'一國兩制','n')
txt1<-unlist(lapply(Dcard$content[1:100],dseg,'n'))
st1<-freq(txt1)
txt1<-unlist(lapply(resdataD$title[1:100],dseg,'n'))
st1<-freq(txt1)
st1<-st1[order(st1$freq,decreasing = TRUE),]
wordcloud(words=st1$char,freq=st1$freq,scale = c(3,0.1),
random.order = F,
ordered.colors = F,
rot.per = F,
min.freq = 5,
colors = brewer.pal(8,"Dark2")
)
st1<-freq(txt1)
st1<-st1[order(st1$freq,decreasing = TRUE),]
wordcloud(words=st1$char,freq=st1$freq,scale = c(3,0.1),
random.order = F,
ordered.colors = F,
rot.per = F,
min.freq = 5,
colors = brewer.pal(8,"Dark2")
)
library(httr)
library(jsonlite)
library(dplyr)
getwd()
setwd("D:/Annie/Documents/GitHub/GitHubForRClass/RClassRepository/example/test")
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcardurl <- 'https://www.dcard.tw/_api/forums/'
board <- 'trending'
mainurl <- paste0(dcardurl,board,'/posts?popular=false')
resdata <- fromJSON(content(GET(mainurl), "text"))
resdataD<-as.data.frame(resdata)%>%
select(title,createdAt)
head(resdata[,1:2])
tail(resdata[,1:2])
end <- resdata$id[length(resdata$id)]
end
n <- 36000
page <- (36000/30)-1
pageread<-2
library(readxl)
library(ggplot2)
#DcardData<-read.csv("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.csv",sep = ",", as.is = TRUE)
DcardData<-read_excel("D://Annie//Documents//GitHub//GitHubForRClass//Extradition-Bill//DcardData//DcardData.xlsx")
DcardData$createdAt <- as.Date(DcardData$createdAt,format="%Y-%m-%d")
t=c("Dcard")
Graph<-ggplot(data=DcardData,aes(x=createdAt,y=qua,group=t))+
geom_line(aes(color=t))+
geom_point(aes(color=t))
Graph_plus<-Graph+scale_color_manual(values=c("#28004d"))+ scale_x_date(date_minor_breaks="3 day")+scale_y_continuous(trans = 'sqrt')
print(Graph_plus)
library(NLP)
library(httr)
library(jsonlite)
library(tm)
library(jiebaRD)
library(jiebaR)
library(dplyr)
library(ggplot2)
library(wordcloud)
library(httr)
library(jsonlite)
library(dplyr)
getwd()
setwd("D:/Annie/Documents/GitHub/GitHubForRClass/RClassRepository/example/test")
options(stringsAsFactors = FALSE)
options(encoding = "UTF-8")
dcardurl <- 'https://www.dcard.tw/_api/forums/'
board <- 'trending'
mainurl <- paste0(dcardurl,board,'/posts?popular=false')
resdata <- fromJSON(content(GET(mainurl), "text"))
resdataD<-as.data.frame(resdata)%>%
select(title,content,createdAt)
dseg<- function(str,term) {
str = gsub("[A-Za-z0-9]", "", str)
seg = cutter[str]
seg = seg[names(seg)==term]
id = which(nchar(seg) > 1)
result = seg[id]
}
#Dcard<-data.frame(resdata$id,resdata$title,resdata$createdAt,
#resdata$updatedAt,resdata$department,
#resdata$commentCount,resdata$likeCount,
#resdata$gender,content,comment)
head(resdataD$title)
cutter <- worker('tag',write = "NOFILE")
new_user_word(cutter,'中天','n')
new_user_word(cutter,'總統','n')
new_user_word(cutter,'韓粉','n')
new_user_word(cutter,'民主','n')
new_user_word(cutter,'自由','n')
new_user_word(cutter,'選舉','n')
new_user_word(cutter,'大選','n')
new_user_word(cutter,'香港','n')
new_user_word(cutter,'台灣','n')
new_user_word(cutter,'中國','n')
new_user_word(cutter,'韓導','n')
new_user_word(cutter,'蔡英文','n')
new_user_word(cutter,'韓國瑜','n')
new_user_word(cutter,'柯文哲','n')
new_user_word(cutter,'民進黨','n')
new_user_word(cutter,'國民黨','n')
new_user_word(cutter,'反送中','n')
new_user_word(cutter,'一國兩制','n')
txt1<-unlist(lapply(resdataD$title[1:100],dseg,'n'))
st1<-freq(txt1)
st1<-st1[order(st1$freq,decreasing = TRUE),]
wordcloud(words=st1$char,freq=st1$freq,scale = c(3,0.1),
random.order = F,
ordered.colors = F,
rot.per = F,
min.freq = 5,
colors = brewer.pal(8,"Dark2")
)
st1<-st1[order(st1$freq,decreasing = TRUE),]
wordcloud(words=st1$char,freq=st1$freq,scale = c(3,0.1),
random.order = F,
ordered.colors = F,
rot.per = F,
min.freq = 1,
colors = brewer.pal(8,"Dark2")
)
